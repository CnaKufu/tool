import{_ as a,r as e,j as l,k as s,c as t,w as r,W as u,i as o,o as n,a as i,u as c,N as d,O as m,e as p,t as f,C as _,D as v,a2 as b,g as h,f as j}from"./index-BlA2gAjI.js";import{_ as y}from"./uni-easyinput.BgiL-3b4.js";import{_ as V,a as g}from"./uni-forms.CLTeN3fp.js";import{_ as k}from"./uni-card.CMdkrJnO.js";import"./uni-icons.4RJzTdBX.js";const x=a({__name:"BiliImg_ALAPI",setup(a){let x=e({url:""}),C=e({url:{rules:[{required:!0,errorMessage:"视频链接或BV号不能为空"}]}});const A=e(""),B=e("");let I=e(null);const w=()=>{b({urls:[B.value]})};return(a,e)=>{const b=l(s("uni-easyinput"),y),P=l(s("uni-forms-item"),V),R=l(s("uni-forms"),g),q=l(s("up-button"),u),D=l(s("uni-card"),k),E=h,F=j,G=o;return n(),t(G,{class:"container"},{default:r((()=>[i(D,null,{default:r((()=>[i(R,{ref_key:"form",ref:I,model:c(x),rules:c(C),"label-position":"top"},{default:r((()=>[i(P,{label:"👇视频链接",name:"url","label-width":"90"},{default:r((()=>[i(b,{class:"input",modelValue:c(x).url,"onUpdate:modelValue":e[0]||(e[0]=a=>c(x).url=a),trim:"",placeholder:"请粘贴视频链接或BV号~"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),i(q,{class:"button",text:"获取",onClick:e[1]||(e[1]=a=>{I.value.validate().then((a=>{console.log(a.url);const e=a.url.match(/(https?:\/\/[^\s]+)/);let l;l=e&&e.length>0?e[0]:a.url,_({url:"https://v2.alapi.cn/api/bilibili/cover",data:{c:l,token:"VJF3R1rR5A7PCxyK"},header:{},method:"GET",success:a=>{let e=a.data.data.title,l=a.data.data.cover;B.value=l,A.value=e},fail:a=>{v({title:"获取失败",icon:"none"}),console.error(a)}})})).catch((a=>{}))}),type:"primary"})])),_:1}),d(i(D,null,{default:r((()=>[i(E,{selectable:"","user-select":""},{default:r((()=>[p(f(A.value),1)])),_:1}),i(F,{src:B.value,onClick:w},null,8,["src"])])),_:1},512),[[m,A.value]])])),_:1})}}},[["__scopeId","data-v-6501b477"]]);export{x as default};
