import{_ as a,r as e,h as l,A as t,j as u,k as s,c as n,w as d,B as o,C as i,D as r,i as f,E as v,o as c,a as _,e as m,t as p,l as g,b as h,d as y,F as k,u as b,v as w,s as D,n as x,g as V}from"./index-BlA2gAjI.js";import{_ as j,a as C,b as F,c as A,d as B}from"./uni-table.BfwA1Vue.js";import{_ as M,a as R}from"./uni-forms.CLTeN3fp.js";import{_ as T}from"./uni-icons.4RJzTdBX.js";const Y=a({__name:"BirthdayBook",setup(a){const Y=e(l("birthDate"));""==Y.value&&(Y.value="2000-01-01");const q=e(0),H=e(""),L=e(""),P=e(0),U=e(""),E=e(0),I=e(0);let J=e([]),K=e(null);const O=()=>{let a=Y.value;o({key:"birthDate",data:a});let e=new Date,l=new Date(a),t=e.getFullYear()-l.getFullYear(),u=e.getMonth()-l.getMonth();u<0||0===u&&e.getDate()<l.getDate()?q.value=t-1:q.value=t;H.value=["🐒猴","🐓鸡","🐕狗","🐖猪","🐀鼠","🐂牛","🐅虎","🐇兔","🐉龙","🐍蛇","🐎马","🐏羊"][l.getFullYear()%12];let s=l.getMonth()+1,n=l.getDate();P.value=s-(n<"102223444433".charAt(s-1)- -19),L.value=["♑摩羯座","♒水瓶座","♓双鱼座","♈白羊座","♉金牛座","♊双子座","♋巨蟹座","♌狮子座","♍处女座","♎天秤座","♏天蝎座","♐射手座"][P.value],q.value>=0&&q.value<=1?U.value="婴儿时期":q.value>=1&&q.value<=4?U.value="幼儿时期":q.value>=5&&q.value<=11?U.value="儿童时期":q.value>=12&&q.value<=17?U.value="少年时期":q.value>=18&&q.value<=35?U.value="青年时期":q.value>=36&&q.value<=59?U.value="中年时期":q.value>=60?U.value="老年时期":U.value="无效的年龄",E.value=60-q.value,I.value=50-q.value;let d=a.slice(5,7)+a.slice(8,10);K.value.clear(),function(a){i({url:"https://v2.alapi.cn/api/eventHistory",data:{monthday:a,page:1,token:"VJF3R1rR5A7PCxyK"},headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",success:a=>{200==a.data.code?J.value=a.data.data:(r({title:"历史事件获取失败",icon:"none"}),console.log(a.data.msg))},fail:a=>{r({title:"历史事件获取失败",icon:"none"}),console.error(a)}})}(d)};return t((()=>{O()})),(a,e)=>{const l=u(s("uni-datetime-picker"),j),t=u(s("uni-forms-item"),M),o=u(s("uni-forms"),R),i=u(s("uni-th"),C),r=u(s("uni-td"),F),S=u(s("uni-tr"),A),z=V,G=u(s("uni-icons"),T),N=u(s("uni-table"),B),Q=f,W=u(s("up-waterfall"),v);return c(),n(Q,{class:"container"},{default:d((()=>[_(o,{"label-position":"top"},{default:d((()=>[_(t,{label:"出生日期",required:""},{default:d((()=>[_(l,{type:"date",modelValue:Y.value,"onUpdate:modelValue":e[0]||(e[0]=a=>Y.value=a),onChange:O},null,8,["modelValue"])])),_:1})])),_:1}),_(N,{emptyText:""},{default:d((()=>[_(S,null,{default:d((()=>[_(i,null,{default:d((()=>[m("年龄: ")])),_:1}),_(r,null,{default:d((()=>[m(p(q.value)+" 岁",1)])),_:1})])),_:1}),_(S,null,{default:d((()=>[_(i,null,{default:d((()=>[m("生肖: ")])),_:1}),_(r,null,{default:d((()=>[m(p(H.value),1)])),_:1})])),_:1}),_(S,null,{default:d((()=>[_(i,null,{default:d((()=>[m("星座: ")])),_:1}),_(r,{class:"u-flex u-flex-between"},{default:d((()=>[_(z,null,{default:d((()=>[m(p(L.value),1)])),_:1}),_(G,{onClick:e[1]||(e[1]=a=>(D("constellation",["capricorn","aquarius","pisces","aries","taurus","gemini","cancer","leo","virgo","libra","scorpio","sagittarius"][P.value]),void x({url:"/pages/tool/Horoscope"}))),type:"chat"})])),_:1})])),_:1}),_(S,null,{default:d((()=>[_(i,null,{default:d((()=>[m("年龄段: ")])),_:1}),_(r,null,{default:d((()=>[m(p(U.value),1)])),_:1})])),_:1}),_(S,null,{default:d((()=>[_(i,null,{default:d((()=>[m("离退休: ")])),_:1}),_(r,null,{default:d((()=>[E.value>0?(c(),n(z,{key:0},{default:d((()=>[m(p(E.value)+"年(男)",1)])),_:1})):(c(),n(z,{key:1},{default:d((()=>[m("已退休(男)")])),_:1})),I.value>0?(c(),n(z,{key:2},{default:d((()=>[m(p(I.value)+"年(女)",1)])),_:1})):(c(),n(z,{key:3},{default:d((()=>[m("已退休(女)")])),_:1}))])),_:1})])),_:1}),"青年时期"===U.value?(c(),n(S,{key:0},{default:d((()=>[_(i,null,{default:d((()=>[m("虚岁: ")])),_:1}),_(r,null,{default:d((()=>[m("刚满十八岁~😎")])),_:1})])),_:1})):g("",!0)])),_:1}),_(Q,{class:"title"},{default:d((()=>[_(z,null,{default:d((()=>[m("历史的当天")])),_:1})])),_:1}),_(W,{modelValue:b(J),"onUpdate:modelValue":e[2]||(e[2]=a=>w(J)?J.value=a:J=a),"add-time":"500",ref_key:"waterfallRef",ref:K},{left:d((({leftList:a})=>[(c(!0),h(k,null,y(a,((a,e)=>(c(),n(Q,{key:e,class:"waterfall-item"},{default:d((()=>[_(Q,{class:"data-date"},{default:d((()=>[m(p(a.date),1)])),_:2},1024),_(Q,{class:"data-title"},{default:d((()=>[m(p(a.title),1)])),_:2},1024)])),_:2},1024)))),128))])),right:d((({rightList:a})=>[(c(!0),h(k,null,y(a,((a,e)=>(c(),n(Q,{key:e,class:"waterfall-item"},{default:d((()=>[_(Q,{class:"data-date"},{default:d((()=>[m(p(a.date),1)])),_:2},1024),_(Q,{class:"data-title"},{default:d((()=>[m(p(a.title),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-6fdb99ab"]]);export{Y as default};
